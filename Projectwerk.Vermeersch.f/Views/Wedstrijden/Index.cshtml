
@model List<Projectwerk.Vermeersch.f.Viewmodels.WedstrijdViewModel>

@{
    ViewBag.Title = "Index";

    AjaxOptions options = new AjaxOptions();
    options.HttpMethod = "GET";
    options.UpdateTargetId = "divToevoegen";
    options.InsertionMode = InsertionMode.Replace;
}


<div class="well well-sm" style="background:#D41024;color:white;">
    <img class="img-rounded" style="height:80px;" src="~/Pics/leden/@Model.First().AfbeeldingsURL" />
    <h2 style="display:inline; margin-left:5%;">Wedstrijdpagina &nbsp; @Model.First().Putternaam</h2>
</div>

<div class="row">
    <div class="col-md-7" style="padding:0;">
        <table id="wedstrijdtable" border="1" class="table table-striped" style="background-color:#EEE; color:black">
            <thead style="background-color:#555;color:white;">
                <tr>
                    <th></th>
                    <th>Datum </th>
                    <th>Locatie </th>
                    <th>Sport </th>
                    <th>Afstand </th>
                    <th>Stayer </th>
                    <th style="display:none">id</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                <tr v-for="row in wedstrijdlijst">
                    <td class="delete">
                        <a href="#">
                            <img src="~/Pics/delete.png" alt="Delete" width="20px" />
                        </a>
                    </td>
                    <td>{{row.Datum}}</td>
                    <td>{{row.Plaats}}</td>
                    <td>{{row.Sport}}</td>
                    <td>{{row.Afstand}}</td>
                    <td>{{row.Stayer}}</td>
                    <td style="display:none" id="wedstrijdId">{{row.PutterId}}</td>
                    <td>test</td>
                </tr>
            </tbody>
        </table>
        <div id="test" style="color:red;"></div>
        @Ajax.ActionLink("Wedstrijd toevoegen", "AddWedstrijd", new { id = Model.First().PutterId }, options, new { @class = "btn btn-primary"})

        <button id="testbtn">Test</button>

    </div>
    <div  id="divToevoegen"></div>
</div>

@section scripts
{
    <script>
        $(document).ready(function () {

            //$('#test').html('fluppe');

            var wedstrijdlijst = @Html.Raw(Json.Encode(Model));
            DateConvert();

            function DateConvert()
            {
                for (var i = 0; i < wedstrijdlijst.length; i++)
                {
                    var datum = wedstrijdlijst[i].Datum;
                    var d =new Date (parseInt(datum.substr(6)));
                    wedstrijdlijst[i].Datum = d.toLocaleDateString();
                }

            }

            //$(document).on('click', ".delete" , function () {
            //    $(this).parent().remove();
            //});


            //$('#test').html(day);

            var wedstrijdtable = new Vue({
                el: '#wedstrijdtable',
                data: { wedstrijdlijst}
            });
            $('#testbtn').on('click', function () {
                wedstrijdlijst.push({"Putternaam":"jaak ","PutterId":11,"Plaats":"stonebridge","Datum":"07-4-2018",
                    "Afstand":"Half","Sport":"Triatlon","Stayer":false,"AfbeeldingsURL":"1.png"})
                //DateConvert();
            });

        });

    </script>
}

